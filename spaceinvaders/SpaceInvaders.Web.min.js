Bridge.assembly("SpaceInvaders.Web",function($asm,globals){"use strict";Bridge.define("Microsoft.Xna.Framework.DrawableGameComponent",{inherits:[Microsoft.Xna.Framework.GameComponent,Microsoft.Xna.Framework.IDrawable],fields:{_initialized:!1,_drawOrder:0,_visible:!1},events:{DrawOrderChanged:null,VisibleChanged:null},props:{GraphicsDevice:{get:function(){return this.Game.GraphicsDevice}},DrawOrder:{get:function(){return this._drawOrder},set:function(value){this._drawOrder!==value&&(this._drawOrder=value,this.OnDrawOrderChanged(this,{}))}},Visible:{get:function(){return this._visible},set:function(value){this._visible!==value&&(this._visible=value,this.OnVisibleChanged(this,{}))}}},alias:["DrawOrder","Microsoft$Xna$Framework$IDrawable$DrawOrder","Visible","Microsoft$Xna$Framework$IDrawable$Visible","addDrawOrderChanged","Microsoft$Xna$Framework$IDrawable$addDrawOrderChanged","removeDrawOrderChanged","Microsoft$Xna$Framework$IDrawable$removeDrawOrderChanged","addVisibleChanged","Microsoft$Xna$Framework$IDrawable$addVisibleChanged","removeVisibleChanged","Microsoft$Xna$Framework$IDrawable$removeVisibleChanged","Initialize","Microsoft$Xna$Framework$IGameComponent$Initialize","Draw","Microsoft$Xna$Framework$IDrawable$Draw"],ctors:{init:function(){this._visible=!0},ctor:function(game){this.$initialize();Microsoft.Xna.Framework.GameComponent.ctor.call(this,game)}},methods:{Initialize:function(){this._initialized||(this._initialized=!0,this.LoadContent())},LoadContent:function(){},UnloadContent:function(){},Draw:function(gameTime){},OnVisibleChanged:function(sender,args){Bridge.staticEquals(this.VisibleChanged,null)||this.VisibleChanged(sender,args)},OnDrawOrderChanged:function(sender,args){Bridge.staticEquals(this.DrawOrderChanged,null)||this.DrawOrderChanged(sender,args)}}});Bridge.define("SpaceInvaders.Shared.AlienWave",{fields:{GameOver:!1,CurrentWave:0,velocity:0,direction:0,maxWave:0,collection:null},ctors:{init:function(){this.GameOver=!1;this.CurrentWave=0;this.velocity=100;this.direction=1;this.maxWave=10},ctor:function(collection){this.$initialize();this.collection=collection}},methods:{Reset:function(){this.velocity=100;this.direction=1;this.CurrentWave=0;this.GameOver=!1},Update:function(){var $t,noneLeft=!0,a;$t=Bridge.getEnumerator(this.collection.GetAll(SpaceInvaders.Shared.GameObjects.Alien),SpaceInvaders.Shared.GameObjects.Alien);try{while($t.moveNext()){if(a=$t.Current,noneLeft=!1,a.Position.X<0||a.Position.X>960){this.SwitchDirection();break}if(a.Position.Y>440){this.GameOver=!0;return}}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(noneLeft)if(this.CurrentWave<this.maxWave)this.velocity*=1.1,this.AddAlienWave();else{this.GameOver=!0;return}},AddAlienWave:function(){var currentSize,i,j;for(this.CurrentWave=this.CurrentWave+1|0,this.direction=1,currentSize=SpaceInvaders.Shared.GameObjects.Alien.Size.Small,i=0;i<3;i=i+1|0){for(j=0;j<11;j=j+1|0)new SpaceInvaders.Shared.GameObjects.Alien(new Microsoft.Xna.Framework.Vector2.$ctor2(Bridge.Int.mul(j+1|0,40),Bridge.Int.mul(i+1|0,40)),currentSize).AddTo(this.collection);currentSize=currentSize+1|0}},SwitchDirection:function(){var $t,a;this.direction*=-1;$t=Bridge.getEnumerator(this.collection.GetAll(SpaceInvaders.Shared.GameObjects.Alien),SpaceInvaders.Shared.GameObjects.Alien);try{while($t.moveNext())a=$t.Current,a.Get(SpaceInvaders.Shared.Components.MotionComponent).Velocity.X=this.velocity*this.direction,a.Position=new Microsoft.Xna.Framework.Vector2.$ctor2(a.Position.X,a.Position.Y+10)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}});Bridge.define("SpaceInvaders.Shared.Components.BaseComponent",{fields:{Entity:null},ctors:{ctor:function(){this.$initialize()}},methods:{AddTo:function(entity){this.Entity=entity;entity.Add(this)},Draw:function(spriteBatch){},Update:function(elapsedSeconds){}}});Bridge.define("SpaceInvaders.Shared.EntityCollection",{fields:{entities:null},ctors:{ctor:function(){this.$initialize();this.entities=new(System.Collections.Generic.List$1(SpaceInvaders.Shared.GameObjects.CollidableEntity).ctor)}},methods:{Add:function(entity){this.entities.add(entity)},Remove:function(entity){this.entities.remove(entity)},Get:function(T){var $t,entity;$t=Bridge.getEnumerator(this.entities);try{while($t.moveNext())if(entity=$t.Current,Bridge.is(entity,T))return Bridge.cast(entity,T)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return null},GetAll:function(T){var $t,list=new(System.Collections.Generic.List$1(T).ctor),entity;$t=Bridge.getEnumerator(this.entities);try{while($t.moveNext())entity=$t.Current,Bridge.is(entity,T)&&list.add(Bridge.cast(entity,T))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return list},Clear:function(){this.entities.clear()},Update:function(elapsedSeconds){for(var entity,i=0;i<this.entities.Count;i=i+1|0)entity=this.entities.getItem(i),entity.Update(elapsedSeconds)},Draw:function(spriteBatch){var $t,entity;$t=Bridge.getEnumerator(this.entities);try{while($t.moveNext())entity=$t.Current,entity.Draw(spriteBatch)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},LoadContent:function(contentManager){var $t,entity;$t=Bridge.getEnumerator(this.entities);try{while($t.moveNext())entity=$t.Current,entity.LoadContent(contentManager)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}});Bridge.define("SpaceInvaders.Shared.Game1",{inherits:[Microsoft.Xna.Framework.Game],fields:{graphics:null,spriteBatch:null},ctors:{ctor:function(){this.$initialize();Microsoft.Xna.Framework.Game.ctor.call(this);this.graphics=new Microsoft.Xna.Framework.GraphicsDeviceManager(this);this.Content.RootDirectory="Content"}},methods:{Initialize:function(){this.Window.Title="SpaceInvaders-dev-release";this.graphics.PreferredBackBufferWidth=960;this.graphics.PreferredBackBufferHeight=540;this.graphics.ApplyChanges();this.Window.AllowUserResizing=!1;this.IsMouseVisible=!1;var sceneSwitcher=new SpaceInvaders.Shared.SceneSwitcher;this.Services.AddService$1(Bridge.global.SpaceInvaders.Shared.SceneSwitcher,sceneSwitcher);this.Components.add(new SpaceInvaders.Shared.Scenes.MainMenuScene(this));this.Components.add(new SpaceInvaders.Shared.Scenes.MainGameScene(this));sceneSwitcher.SwitchScene(SpaceInvaders.Shared.Scenes.MainMenuScene);Microsoft.Xna.Framework.Game.prototype.Initialize.call(this)},LoadContent:function(){this.spriteBatch=new Microsoft.Xna.Framework.Graphics.SpriteBatch(this.GraphicsDevice)},UnloadContent:function(){},Update:function(gameTime){Microsoft.Xna.Framework.Game.prototype.Update.call(this,gameTime)},Draw:function(gameTime){this.GraphicsDevice.Clear(Microsoft.Xna.Framework.Color.Black.$clone());Microsoft.Xna.Framework.Game.prototype.Draw.call(this,gameTime)}}});Bridge.define("SpaceInvaders.Shared.GameObjects.CollidableEntity",{fields:{Position:null,Collection:null,components:null},ctors:{init:function(){this.Position=new Microsoft.Xna.Framework.Vector2},ctor:function(){this.$initialize();this.components=new(System.Collections.Generic.List$1(SpaceInvaders.Shared.Components.BaseComponent).ctor)}},methods:{AddTo:function(entityCollection){this.Collection=entityCollection;entityCollection.Add(this)},Destroy:function(){this.Collection.Remove(this)},Add:function(component){this.components.add(component)},Get:function(T){var $t,component;$t=Bridge.getEnumerator(this.components);try{while($t.moveNext())if(component=$t.Current,Bridge.is(component,T))return Bridge.cast(component,T)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return null},Remove:function(T){var $t,component;$t=Bridge.getEnumerator(this.components);try{while($t.moveNext())component=$t.Current,Bridge.is(component,T)&&this.components.remove(component)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},LoadContent:function(content){},Draw:function(spriteBatch){var $t,component;$t=Bridge.getEnumerator(this.components);try{while($t.moveNext())component=$t.Current,component.Draw(spriteBatch)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},Update:function(elapsedSeconds){var $t,component;$t=Bridge.getEnumerator(this.components);try{while($t.moveNext())component=$t.Current,component.Update(elapsedSeconds)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},OnCollision:function(other){}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Alien.Size",{$kind:"nested enum",statics:{fields:{Small:0,Medium:1,Large:2}}});Bridge.define("SpaceInvaders.Shared.Scenes.MainGameScene.GameState",{$kind:"nested enum",statics:{fields:{Playing:0,Paused:1,GameOver:2}}});Bridge.define("SpaceInvaders.Shared.SceneSwitcher",{fields:{scenes:null,currentScene:null},ctors:{ctor:function(){this.$initialize();this.scenes=new(System.Collections.Generic.List$1(SpaceInvaders.Shared.BaseScene).ctor)}},methods:{SwitchScene:function(T){var $t,scene;$t=Bridge.getEnumerator(this.scenes);try{while($t.moveNext())if(scene=$t.Current,Bridge.is(scene,T)){this.currentScene.Enabled=!1;this.currentScene.Visible=!1;this.currentScene=scene;scene.Enabled=!0;scene.Visible=!0;return}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}throw new System.Exception("Scene not found");},AddScene:function(scene){this.scenes.add(scene);this.scenes.Count===1&&(this.currentScene=scene)}}});Bridge.define("SpaceInvaders.Shared.TextField",{fields:{Font:null,Position:null,Origin:null,text:null,rightToLeft:!1,centered:!1},props:{Text:{get:function(){return this.text},set:function(value){Bridge.referenceEquals(value,this.text)||(this.text=value,this.rightToLeft?this.Origin=new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(this.Font.MeasureString(this.Text).X),0):this.centered&&(this.Origin=Microsoft.Xna.Framework.Vector2.op_Division$1(this.Font.MeasureString(this.Text),2).ToPoint()))}}},ctors:{init:function(){this.Position=new Microsoft.Xna.Framework.Point;this.Origin=new Microsoft.Xna.Framework.Point},ctor:function(font,position,text,rightToLeft){rightToLeft===void 0&&(rightToLeft=!1);this.$initialize();this.Font=font;this.Position=position.$clone();this.rightToLeft=rightToLeft;this.Text=text}},methods:{SetOriginToCenter:function(){this.centered=!0;this.Origin=new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(this.Font.MeasureString(this.Text).X/2),Bridge.Int.clip32(this.Font.MeasureString(this.Text).Y/2))},Draw:function(spriteBatch){spriteBatch.DrawString$2(this.Font,this.Text,this.Position.ToVector2(),Microsoft.Xna.Framework.Color.White.$clone(),0,this.Origin.ToVector2(),1,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,1)}}});Bridge.define("SpaceInvaders.Web.App",{main:function(){var div,button;document.body.setAttribute("style","margin: 0; overflow: hidden;");div=document.createElement("div");div.setAttribute("style","width: 960px; height: 540px;");button=document.createElement("button");button.innerHTML="Run Game";button.setAttribute("style","width: 100%; height: 100%; background-color: rgb(100, 149, 237); color: rgb(255, 255, 255); font-size: 20px; border: 0;");document.body.appendChild(div);div.appendChild(button);button.onclick=function(ev){var canvas=document.createElement("canvas");canvas.width=960;canvas.height=540;canvas.id="monogamecanvas";div.removeChild(button);div.appendChild(canvas);SpaceInvaders.Web.App._game=new SpaceInvaders.Shared.Game1;SpaceInvaders.Web.App._game.Run();canvas.focus()}},statics:{fields:{_game:null}}});Bridge.define("SpaceInvaders.Shared.BaseScene",{inherits:[Microsoft.Xna.Framework.DrawableGameComponent],fields:{switcher:null,Content:null,SpriteBatch:null,oldKeyboardState:null,newKeyboardState:null},alias:["Draw","Microsoft$Xna$Framework$IDrawable$Draw","Initialize","Microsoft$Xna$Framework$IGameComponent$Initialize","Update","Microsoft$Xna$Framework$IUpdateable$Update"],ctors:{init:function(){this.oldKeyboardState=new Microsoft.Xna.Framework.Input.KeyboardState;this.newKeyboardState=new Microsoft.Xna.Framework.Input.KeyboardState},ctor:function(game){this.$initialize();Microsoft.Xna.Framework.DrawableGameComponent.ctor.call(this,game);this.Content=new Microsoft.Xna.Framework.Content.ContentManager.$ctor1(game.Services,"Content");this.switcher=game.Services.GetService$1(SpaceInvaders.Shared.SceneSwitcher);this.Enabled=!1;this.Visible=!1}},methods:{Draw:function(gameTime){this.SpriteBatch.Begin();this.OnDraw(gameTime,this.SpriteBatch);this.SpriteBatch.End()},OnDraw:function(gameTime,spriteBatch){},Initialize:function(){this.SpriteBatch=new Microsoft.Xna.Framework.Graphics.SpriteBatch(this.Game.GraphicsDevice)},Update:function(gameTime){this.oldKeyboardState=this.newKeyboardState.$clone();this.newKeyboardState=Microsoft.Xna.Framework.Input.Keyboard.GetState();this.OnUpdate(gameTime.ElapsedGameTime.getTotalSeconds())},OnUpdate:function(elapsedSeconds){},SwitchScene:function(T){this.switcher.SwitchScene(T)},OnKeyDown:function(key){return this.oldKeyboardState.IsKeyUp(key)&&this.newKeyboardState.IsKeyDown(key)},OnKeyUp:function(key){return this.newKeyboardState.IsKeyUp(key)&&this.oldKeyboardState.IsKeyDown(key)}}});Bridge.define("SpaceInvaders.Shared.Components.MotionComponent",{inherits:[SpaceInvaders.Shared.Components.BaseComponent],fields:{Velocity:null},ctors:{init:function(){this.Velocity=new Microsoft.Xna.Framework.Vector2},$ctor1:function(velocity){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this);this.Velocity=velocity.$clone()},ctor:function(){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this)}},methods:{Update:function(elapsedSeconds){SpaceInvaders.Shared.Components.BaseComponent.prototype.Update.call(this,elapsedSeconds);this.Entity.Position=Microsoft.Xna.Framework.Vector2.op_Addition(this.Entity.Position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.Velocity.$clone(),elapsedSeconds))}}});Bridge.define("SpaceInvaders.Shared.Components.RectangleComponent",{inherits:[SpaceInvaders.Shared.Components.BaseComponent],fields:{Bounds:null,ShowBounds:!1},ctors:{init:function(){this.Bounds=new Microsoft.Xna.Framework.Rectangle},ctor:function(position,size){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this);this.Bounds=new Microsoft.Xna.Framework.Rectangle.$ctor1(position.$clone(),size.$clone())}},methods:{Draw:function(spriteBatch){SpaceInvaders.Shared.Components.BaseComponent.prototype.Draw.call(this,spriteBatch);this.ShowBounds&&(spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,new Microsoft.Xna.Framework.Rectangle.$ctor1(this.Bounds.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(this.Bounds.Width,1)),Microsoft.Xna.Framework.Color.Red.$clone()),spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,new Microsoft.Xna.Framework.Rectangle.$ctor1(this.Bounds.Location.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(1,this.Bounds.Height)),Microsoft.Xna.Framework.Color.Red.$clone()),spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,new Microsoft.Xna.Framework.Rectangle.$ctor1(new Microsoft.Xna.Framework.Point.$ctor2(this.Bounds.Left,this.Bounds.Bottom),new Microsoft.Xna.Framework.Point.$ctor2(this.Bounds.Width,1)),Microsoft.Xna.Framework.Color.Red.$clone()),spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,new Microsoft.Xna.Framework.Rectangle.$ctor1(new Microsoft.Xna.Framework.Point.$ctor2(this.Bounds.Right,this.Bounds.Top),new Microsoft.Xna.Framework.Point.$ctor2(1,this.Bounds.Height)),Microsoft.Xna.Framework.Color.Red.$clone()))}}});Bridge.define("SpaceInvaders.Shared.Components.ReservesComponent",{inherits:[SpaceInvaders.Shared.Components.BaseComponent],fields:{Reserves:0},ctors:{ctor:function(reserves){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this);this.Reserves=reserves}}});Bridge.define("SpaceInvaders.Shared.Components.ScoreComponent",{inherits:[SpaceInvaders.Shared.Components.BaseComponent],fields:{Score:0},ctors:{init:function(){this.Score=0},ctor:function(){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this)}}});Bridge.define("SpaceInvaders.Shared.Components.TextureComponent",{inherits:[SpaceInvaders.Shared.Components.BaseComponent],fields:{Texture:null,Origin:null,LayerDepth:0},ctors:{init:function(){this.Origin=new Microsoft.Xna.Framework.Vector2},ctor:function(texture){this.$initialize();SpaceInvaders.Shared.Components.BaseComponent.ctor.call(this);this.Texture=texture;this.LayerDepth=1;this.Origin=texture.Bounds.Center.ToVector2()}},methods:{Draw:function(spriteBatch){SpaceInvaders.Shared.Components.BaseComponent.prototype.Draw.call(this,spriteBatch);spriteBatch.Draw$6(this.Texture,this.Entity.Position.$clone(),null,Microsoft.Xna.Framework.Color.White.$clone(),0,this.Origin.$clone(),1,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,this.LayerDepth)}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Alien",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],statics:{fields:{TextureSmall:null,TextureMedium:null,TextureLarge:null,rand:null,velocity:null},ctors:{init:function(){this.velocity=new Microsoft.Xna.Framework.Vector2;this.rand=new System.Random.ctor;this.velocity=Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitX.$clone(),100)}}},fields:{size:0,projectileSpawnTime:0,maxProjectileTimespan:0},ctors:{init:function(){this.maxProjectileTimespan=20},ctor:function(position,size){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.Position=position.$clone();this.size=size;new SpaceInvaders.Shared.Components.MotionComponent.$ctor1(SpaceInvaders.Shared.GameObjects.Alien.velocity.$clone()).AddTo(this);new SpaceInvaders.Shared.Components.RectangleComponent(Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),size===SpaceInvaders.Shared.GameObjects.Alien.Size.Small?12:size===SpaceInvaders.Shared.GameObjects.Alien.Size.Medium?14:16)).ToPoint(),new Microsoft.Xna.Framework.Point.$ctor1(size===SpaceInvaders.Shared.GameObjects.Alien.Size.Small?24:size===SpaceInvaders.Shared.GameObjects.Alien.Size.Medium?28:32)).AddTo(this);new SpaceInvaders.Shared.Components.TextureComponent(size===SpaceInvaders.Shared.GameObjects.Alien.Size.Small?SpaceInvaders.Shared.GameObjects.Alien.TextureSmall:size===SpaceInvaders.Shared.GameObjects.Alien.Size.Medium?SpaceInvaders.Shared.GameObjects.Alien.TextureMedium:SpaceInvaders.Shared.GameObjects.Alien.TextureLarge).AddTo(this);this.ResetSpawnTime()}},methods:{OnCollision:function(other){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.OnCollision.call(this,other);var p;(p=Bridge.as(other,SpaceInvaders.Shared.GameObjects.Projectile))!=null&&p.MovingUp&&(this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).Get(SpaceInvaders.Shared.Components.ScoreComponent).Score=this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).Get(SpaceInvaders.Shared.Components.ScoreComponent).Score+(this.size===SpaceInvaders.Shared.GameObjects.Alien.Size.Small?30:this.size===SpaceInvaders.Shared.GameObjects.Alien.Size.Medium?20:10)|0,this.Destroy())},Update:function(elapsedSeconds){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Update.call(this,elapsedSeconds);this.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.Location=Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.One.$clone(),this.size===SpaceInvaders.Shared.GameObjects.Alien.Size.Small?12:this.size===SpaceInvaders.Shared.GameObjects.Alien.Size.Medium?14:16)).ToPoint();this.projectileSpawnTime-=elapsedSeconds;this.projectileSpawnTime<0&&(new SpaceInvaders.Shared.GameObjects.Projectile(Microsoft.Xna.Framework.Vector2.op_Addition(this.Position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitY.$clone(),20)),!1).AddTo(this.Collection),this.ResetSpawnTime())},ResetSpawnTime:function(){this.projectileSpawnTime=SpaceInvaders.Shared.GameObjects.Alien.rand.NextDouble()*this.maxProjectileTimespan}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Brick",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],statics:{fields:{DrawTexture:null,bunker:null},ctors:{init:function(){this.bunker=System.Array.init([".......##########.......","....################....","..####################..",".######################.",".######################.","########################","########################","##########....##########","#########......#########","########........########","########........########","########........########"],System.String)}},methods:{CreateBunkers:function(collection,template){for(var column,i,j,k,rawDataAsGrid=System.Array.create(function(){return new Microsoft.Xna.Framework.Color},null,Microsoft.Xna.Framework.Color,template.Height,template.Width),row=0;row<template.Height;row=row+1|0)for(column=0;column<template.Width;column=column+1|0)rawDataAsGrid.set([row,column],SpaceInvaders.Shared.GameObjects.Brick.bunker[row].charCodeAt(column)===46?Microsoft.Xna.Framework.Color.Black:Microsoft.Xna.Framework.Color.White);var amount=4,y=350,bricksize=4,width=Bridge.Int.mul(template.Width,bricksize),xstart=Bridge.Int.div(960-Bridge.Int.mul(amount,width)|0,amount+1|0)|0,xincrement=width+xstart|0,xcurrent=xstart;for(i=0;i<amount;i=i+1|0){for(j=0;j<template.Height;j=j+1|0)for(k=0;k<template.Width;k=k+1|0)Microsoft.Xna.Framework.Color.op_Equality(rawDataAsGrid.get([j,k]).$clone(),Microsoft.Xna.Framework.Color.White.$clone())&&new SpaceInvaders.Shared.GameObjects.Brick(new Microsoft.Xna.Framework.Point.$ctor2(xcurrent+Bridge.Int.mul(k,bricksize)|0,y+Bridge.Int.mul(j,bricksize)|0),new Microsoft.Xna.Framework.Point.$ctor1(bricksize)).AddTo(collection);xcurrent=xcurrent+xincrement|0}}}},fields:{visibleRectangle:null},ctors:{init:function(){this.visibleRectangle=new Microsoft.Xna.Framework.Rectangle},ctor:function(position,size){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.visibleRectangle=new Microsoft.Xna.Framework.Rectangle.$ctor1(position.$clone(),size.$clone());new SpaceInvaders.Shared.Components.RectangleComponent(position.$clone(),size.$clone()).AddTo(this)}},methods:{OnCollision:function(other){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.OnCollision.call(this,other);this.Destroy()},Draw:function(spriteBatch){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Draw.call(this,spriteBatch);spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,this.visibleRectangle.$clone(),Microsoft.Xna.Framework.Color.White.$clone())}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Ground",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],fields:{visibleRectangle:null},ctors:{init:function(){this.visibleRectangle=new Microsoft.Xna.Framework.Rectangle},ctor:function(position,size){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.visibleRectangle=new Microsoft.Xna.Framework.Rectangle.$ctor1(position.$clone(),size.$clone());new SpaceInvaders.Shared.Components.RectangleComponent(position.$clone(),size.$clone()).AddTo(this)}},methods:{Draw:function(spriteBatch){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Draw.call(this,spriteBatch);spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,this.visibleRectangle.$clone(),Microsoft.Xna.Framework.Color.Gray.$clone())}}});Bridge.define("SpaceInvaders.Shared.GameObjects.GroundCannon",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],statics:{fields:{Reserves:0,Velocity:0},ctors:{init:function(){this.Reserves=3;this.Velocity=200}}},fields:{CanShoot:!1,oldKeyboardState:null},ctors:{init:function(){this.oldKeyboardState=new Microsoft.Xna.Framework.Input.KeyboardState;this.CanShoot=!0},ctor:function(position){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.Position=position.$clone();(new SpaceInvaders.Shared.Components.MotionComponent.ctor).AddTo(this);(new SpaceInvaders.Shared.Components.ScoreComponent).AddTo(this);new SpaceInvaders.Shared.Components.ReservesComponent(SpaceInvaders.Shared.GameObjects.GroundCannon.Reserves).AddTo(this);new SpaceInvaders.Shared.Components.RectangleComponent(Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(32,16)).ToPoint(),new Microsoft.Xna.Framework.Point.$ctor2(64,32)).AddTo(this)}},methods:{LoadContent:function(content){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.LoadContent.call(this,content);new SpaceInvaders.Shared.Components.TextureComponent(content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Cannon_64_AA")).AddTo(this)},OnCollision:function(other){var $t;SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.OnCollision.call(this,other);Bridge.identity(this.Get(SpaceInvaders.Shared.Components.ReservesComponent).Reserves,($t=this.Get(SpaceInvaders.Shared.Components.ReservesComponent).Reserves-1|0,this.Get(SpaceInvaders.Shared.Components.ReservesComponent).Reserves=$t,$t))>0?this.Position=new Microsoft.Xna.Framework.Vector2.$ctor2(480,440):this.Destroy()},Update:function(elapsedSeconds){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Update.call(this,elapsedSeconds);var keyboard=Microsoft.Xna.Framework.Input.Keyboard.GetState();this.Get(SpaceInvaders.Shared.Components.MotionComponent).Velocity=Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitX.$clone(),(keyboard.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Left)?-200:0)+(keyboard.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Right)?200:0)|0);(this.Position.X<0||this.Position.X>960)&&(this.Position=new Microsoft.Xna.Framework.Vector2.$ctor2(Microsoft.Xna.Framework.MathHelper.Clamp$1(this.Position.X,0,960),this.Position.Y));this.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.Location=Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(32,16)).ToPoint();this.CanShoot&&keyboard.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Space)&&this.oldKeyboardState.IsKeyUp(Microsoft.Xna.Framework.Input.Keys.Space)&&(new SpaceInvaders.Shared.GameObjects.Projectile(Microsoft.Xna.Framework.Vector2.op_Addition(this.Position.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitY.$clone(),-20)),!0).AddTo(this.Collection),this.CanShoot=!1);this.oldKeyboardState=keyboard.$clone()}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Mothership",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],fields:{MaxPos:0},ctors:{init:function(){this.MaxPos=1500},ctor:function(){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.Position=new Microsoft.Xna.Framework.Vector2.$ctor2(-this.MaxPos,100);new SpaceInvaders.Shared.Components.MotionComponent.$ctor1(new Microsoft.Xna.Framework.Vector2.$ctor2(150,0)).AddTo(this);new SpaceInvaders.Shared.Components.RectangleComponent(Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(32,16)).ToPoint(),new Microsoft.Xna.Framework.Point.$ctor2(64,32)).AddTo(this)}},methods:{LoadContent:function(content){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.LoadContent.call(this,content);new SpaceInvaders.Shared.Components.TextureComponent(content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Mothership_64_AA")).AddTo(this)},OnCollision:function(other){var p,motion;SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.OnCollision.call(this,other);(p=Bridge.as(other,SpaceInvaders.Shared.GameObjects.Projectile))!=null&&p.MovingUp&&(this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).Get(SpaceInvaders.Shared.Components.ScoreComponent).Score=this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).Get(SpaceInvaders.Shared.Components.ScoreComponent).Score+100|0,motion=this.Get(SpaceInvaders.Shared.Components.MotionComponent),motion.Velocity=Microsoft.Xna.Framework.Vector2.op_Multiply$1(motion.Velocity.$clone(),-1.1),this.Position=new Microsoft.Xna.Framework.Vector2.$ctor2(-this.MaxPos*Bridge.Int.sign(motion.Velocity.X),this.Position.Y))},Update:function(elapsedSeconds){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Update.call(this,elapsedSeconds);this.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.Location=Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(32,16)).ToPoint();(this.Position.X<0+-this.MaxPos||this.Position.X>960+this.MaxPos)&&(this.Get(SpaceInvaders.Shared.Components.MotionComponent).Velocity=Microsoft.Xna.Framework.Vector2.op_Multiply$1(this.Get(SpaceInvaders.Shared.Components.MotionComponent).Velocity.$clone(),-1))}}});Bridge.define("SpaceInvaders.Shared.GameObjects.Projectile",{inherits:[SpaceInvaders.Shared.GameObjects.CollidableEntity],statics:{fields:{Texture:null}},fields:{MovingUp:!1},ctors:{ctor:function(position,up){this.$initialize();SpaceInvaders.Shared.GameObjects.CollidableEntity.ctor.call(this);this.Position=position.$clone();this.MovingUp=up;new SpaceInvaders.Shared.Components.TextureComponent(SpaceInvaders.Shared.GameObjects.Projectile.Texture).AddTo(this);new SpaceInvaders.Shared.Components.MotionComponent.$ctor1(Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.op_Multiply$1(Microsoft.Xna.Framework.Vector2.UnitY.$clone(),500),up?-1:1)).AddTo(this);new SpaceInvaders.Shared.Components.RectangleComponent(Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(2,8)).ToPoint(),new Microsoft.Xna.Framework.Point.$ctor2(4,16)).AddTo(this)}},methods:{OnCollision:function(other){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.OnCollision.call(this,other);this.MovingUp?(this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).CanShoot=!0,this.Destroy()):Bridge.is(other,SpaceInvaders.Shared.GameObjects.Alien)||Bridge.is(other,SpaceInvaders.Shared.GameObjects.Mothership)||this.Destroy()},Update:function(elapsedSeconds){SpaceInvaders.Shared.GameObjects.CollidableEntity.prototype.Update.call(this,elapsedSeconds);this.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.Location=Microsoft.Xna.Framework.Vector2.op_Subtraction(this.Position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(2,8)).ToPoint();(this.Position.Y<0||this.Position.Y>540)&&(this.MovingUp&&(this.Collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon).CanShoot=!0),this.Destroy())}}});Bridge.define("SpaceInvaders.Shared.Scenes.MainGameScene",{inherits:[SpaceInvaders.Shared.BaseScene],fields:{txtScore:null,txtReserves:null,txtWave:null,txtGun:null,txtOverlay:null,collection:null,gameState:0,alienWave:null,debugDraw:!1},ctors:{init:function(){this.gameState=SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Playing},ctor:function(game){this.$initialize();SpaceInvaders.Shared.BaseScene.ctor.call(this,game);this.switcher.AddScene(this);this.collection=new SpaceInvaders.Shared.EntityCollection;this.alienWave=new SpaceInvaders.Shared.AlienWave(this.collection);SpaceInvaders.Shared.GameObjects.Brick.DrawTexture=this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Pixel");SpaceInvaders.Shared.GameObjects.Projectile.Texture=this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Projectile_16");SpaceInvaders.Shared.GameObjects.Alien.TextureSmall=this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Alien_24_AA");SpaceInvaders.Shared.GameObjects.Alien.TextureMedium=this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Alien_28_AA");SpaceInvaders.Shared.GameObjects.Alien.TextureLarge=this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/Alien_32_AA");this.CreateGui()}},methods:{CreateGui:function(){var labelFont=this.Content.Load(Microsoft.Xna.Framework.Graphics.SpriteFont,"Fonts/Arial16"),largeFont;this.txtScore=new SpaceInvaders.Shared.TextField(labelFont,new Microsoft.Xna.Framework.Point.$ctor2(280,5),"Score: 0");this.txtReserves=new SpaceInvaders.Shared.TextField(labelFont,new Microsoft.Xna.Framework.Point.$ctor2(580,5),"Reserves: 3");this.txtWave=new SpaceInvaders.Shared.TextField(labelFont,new Microsoft.Xna.Framework.Point.$ctor2(5,5),"Wave: 1");this.txtGun=new SpaceInvaders.Shared.TextField(labelFont,new Microsoft.Xna.Framework.Point.$ctor2(955,5),"Ready",!0);largeFont=this.Content.Load(Microsoft.Xna.Framework.Graphics.SpriteFont,"Fonts/Arial24");this.txtOverlay=new SpaceInvaders.Shared.TextField(largeFont,new Microsoft.Xna.Framework.Point.$ctor2(480,270),"Paused");this.txtOverlay.SetOriginToCenter()},OnEnabledChanged:function(sender,args){SpaceInvaders.Shared.BaseScene.prototype.OnEnabledChanged.call(this,sender,args);this.Enabled?this.AddGameobjects():(this.collection!=null?this.collection.Clear():null,this.SetPaused(!1))},SetPaused:function(value){this.gameState=value?SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Paused:SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Playing;this.Game.IsMouseVisible=value},ChangeState:function(gameState){this.gameState=gameState;switch(gameState){case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Paused:this.txtOverlay.Text="Paused";this.SetPaused(!0);break;case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Playing:this.SetPaused(!1);break;case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver:this.txtOverlay.Text="Game Over!\n"+(this.txtScore.Text||"");break}},OnDraw:function(gameTime,spriteBatch){SpaceInvaders.Shared.BaseScene.prototype.OnDraw.call(this,gameTime,spriteBatch);this.collection.Draw(spriteBatch);this.txtScore.Draw(spriteBatch);this.txtReserves.Draw(spriteBatch);this.txtWave.Draw(spriteBatch);this.txtGun.Draw(spriteBatch);(this.gameState===SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Paused||this.gameState===SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver)&&(spriteBatch.Draw(SpaceInvaders.Shared.GameObjects.Brick.DrawTexture,new Microsoft.Xna.Framework.Rectangle.$ctor1(Microsoft.Xna.Framework.Point.Zero.$clone(),new Microsoft.Xna.Framework.Point.$ctor2(960,540)),Microsoft.Xna.Framework.Color.op_Multiply(Microsoft.Xna.Framework.Color.Black.$clone(),.7)),this.txtOverlay.Draw(spriteBatch))},OnUpdate:function(elapsedSeconds){var $t,o,cannon;switch(this.gameState){case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Playing:if(this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape)&&this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver),this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.P)&&this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Paused),this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.R)&&this.Reload(),this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.F1)){this.debugDraw=!this.debugDraw;$t=Bridge.getEnumerator(this.collection.GetAll(SpaceInvaders.Shared.GameObjects.CollidableEntity),SpaceInvaders.Shared.GameObjects.CollidableEntity);try{while($t.moveNext())o=$t.Current,o.Get(SpaceInvaders.Shared.Components.RectangleComponent)!=null&&(o.Get(SpaceInvaders.Shared.Components.RectangleComponent).ShowBounds=this.debugDraw)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}this.collection.Update(elapsedSeconds);this.alienWave.Update();this.alienWave.GameOver&&this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver);this.DoCollisionChecks();cannon=this.collection.Get(SpaceInvaders.Shared.GameObjects.GroundCannon);cannon==null?this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver):(this.txtScore.Text="Score: "+cannon.Get(SpaceInvaders.Shared.Components.ScoreComponent).Score,this.txtReserves.Text="Reserves: "+cannon.Get(SpaceInvaders.Shared.Components.ReservesComponent).Reserves,this.txtWave.Text="Wave: "+this.alienWave.CurrentWave,this.txtGun.Text=cannon.CanShoot?"Ready":"Reloading");break;case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Paused:this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape)&&this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver);this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.R)&&this.Reload();this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.P)&&this.ChangeState(SpaceInvaders.Shared.Scenes.MainGameScene.GameState.Playing);break;case SpaceInvaders.Shared.Scenes.MainGameScene.GameState.GameOver:if(this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape)){this.SwitchScene(SpaceInvaders.Shared.Scenes.MainMenuScene);return}break}},Reload:function(){this.collection.Clear();this.SetPaused(!1);this.AddGameobjects()},DoCollisionChecks:function(){var $t,$t1,projectiles=this.collection.GetAll(SpaceInvaders.Shared.GameObjects.Projectile),gameObjects=this.collection.GetAll(SpaceInvaders.Shared.GameObjects.CollidableEntity),projectile,collidable;$t=Bridge.getEnumerator(projectiles,SpaceInvaders.Shared.GameObjects.Projectile);try{while($t.moveNext()){projectile=$t.Current;$t1=Bridge.getEnumerator(gameObjects,SpaceInvaders.Shared.GameObjects.CollidableEntity);try{while($t1.moveNext())collidable=$t1.Current,Bridge.referenceEquals(collidable,projectile)||projectile.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.Intersects(collidable.Get(SpaceInvaders.Shared.Components.RectangleComponent).Bounds.$clone())&&(projectile.OnCollision(collidable),collidable.OnCollision(projectile))}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},AddGameobjects:function(){var $t,entity;new SpaceInvaders.Shared.GameObjects.Ground(new Microsoft.Xna.Framework.Point.$ctor2(0,440),new Microsoft.Xna.Framework.Point.$ctor2(960,100)).AddTo(this.collection);new SpaceInvaders.Shared.GameObjects.GroundCannon(new Microsoft.Xna.Framework.Vector2.$ctor2(480,440)).AddTo(this.collection);this.alienWave.Reset();this.alienWave.AddAlienWave();SpaceInvaders.Shared.GameObjects.Brick.CreateBunkers(this.collection,this.Content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,"Textures/DefensiveBunker_24"));(new SpaceInvaders.Shared.GameObjects.Mothership).AddTo(this.collection);$t=Bridge.getEnumerator(this.collection.GetAll(SpaceInvaders.Shared.GameObjects.CollidableEntity),SpaceInvaders.Shared.GameObjects.CollidableEntity);try{while($t.moveNext())entity=$t.Current,entity.LoadContent(this.Content)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}});Bridge.define("SpaceInvaders.Shared.Scenes.MainMenuScene",{inherits:[SpaceInvaders.Shared.BaseScene],fields:{txtPlay:null,txtExit:null,txtHeadline:null,txtSelection:null,txtControls:null,justEnabled:!1},ctors:{ctor:function(game){this.$initialize();SpaceInvaders.Shared.BaseScene.ctor.call(this,game);this.switcher.AddScene(this);this.CreateGui()}},methods:{OnEnabledChanged:function(sender,args){SpaceInvaders.Shared.BaseScene.prototype.OnEnabledChanged.call(this,sender,args);this.Enabled&&(this.justEnabled=!0)},OnUpdate:function(elapsedSeconds){if(!this.justEnabled&&this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape)){this.Game.Exit();return}if(this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Down)&&(this.txtSelection.Position=this.txtExit.Position.$clone()),this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Up)&&(this.txtSelection.Position=this.txtPlay.Position.$clone()),this.OnKeyDown(Microsoft.Xna.Framework.Input.Keys.Enter))if(Microsoft.Xna.Framework.Point.op_Equality(this.txtSelection.Position.$clone(),this.txtPlay.Position.$clone())){this.SwitchScene(SpaceInvaders.Shared.Scenes.MainGameScene);return}else if(Microsoft.Xna.Framework.Point.op_Equality(this.txtSelection.Position.$clone(),this.txtExit.Position.$clone())){this.Game.Exit();return}this.justEnabled=!1},OnDraw:function(gameTime,spriteBatch){SpaceInvaders.Shared.BaseScene.prototype.OnDraw.call(this,gameTime,spriteBatch);this.txtHeadline.Draw(spriteBatch);this.txtControls.Draw(spriteBatch);this.txtPlay.Draw(spriteBatch);this.txtExit.Draw(spriteBatch);this.txtSelection.Draw(spriteBatch)},CreateGui:function(){var largeFont=this.Content.Load(Microsoft.Xna.Framework.Graphics.SpriteFont,"Fonts/Arial24");this.txtHeadline=new SpaceInvaders.Shared.TextField(largeFont,new Microsoft.Xna.Framework.Point.$ctor2(480,100),"Space Invaders");this.txtHeadline.SetOriginToCenter();this.txtPlay=new SpaceInvaders.Shared.TextField(largeFont,new Microsoft.Xna.Framework.Point.$ctor2(680,240),"Play");this.txtPlay.SetOriginToCenter();this.txtExit=new SpaceInvaders.Shared.TextField(largeFont,new Microsoft.Xna.Framework.Point.$ctor2(680,300),"Exit");this.txtExit.SetOriginToCenter();this.txtSelection=new SpaceInvaders.Shared.TextField(largeFont,this.txtPlay.Position.$clone(),"---          ---");this.txtSelection.SetOriginToCenter();this.txtControls=new SpaceInvaders.Shared.TextField(largeFont,new Microsoft.Xna.Framework.Point.$ctor2(150,150),"Controls:\n   Left/Right to move\n   Space to shoot\n   R to reset\n   P to pause\n   Esc to end game")}}})});